<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>DisunicX - The Next Generation Search Engine | Disunic.com</title>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
</head>
<body>
    <div id="setting">
        <button id="opener" onclick="setting()">➕</button>
    </div>
    <div id="opensetting" style="display: none;">
        <div id="menu">
            <p>Setting</p>
            <button id="settingclose" onclick="settingclose()">✖</button>
        </div>
        <div id="engines">
            <P>Choose Search Engine</P>
            <a href="./index1.html"><button id="searchengines">Bing</button></a>
            <a href="./index2.html"><Button id="searchengines">Yahoo</Button></a>
            <a href="./index3.html"><button id="searchengines">DuckDuckGo</button></a>
            <a href="./index1.html"><button id="searchengines">Startpage</button></a>
            <a href="./index2.html"><Button id="searchengines">Yandex</Button></a>
            <a href="./index3.html"><button id="searchengines">Ecosia</button></a>
            <a href="./index3.html"><button id="searchengines">AOL</button></a>
            <a href="./index1.html"><button id="searchengines">MetaGer</button></a>
        </div>
        <div id="engines">
            <p>Choose Theme</p>
            <button onclick="document.bgColor = 'white'" id="theme">Default</button>
            <Button onclick="document.bgColor = 'white'" id="theme">Light</Button>
            <button onclick="document.bgColor = '#252525'" id="theme">Dark</button>
        </div>
    </div>
    <div id="weather">
            <div class="error"></div>
<div class="circle">
    <!-- <div class="onoffswitch">
    
      <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch">
      <label class="onoffswitch-label" for="myonoffswitch"></label>
    </div> -->
  <div id="startweather">
  <div id="location"></div>
  <div id="show-weather"><span></span></div>
  <div class="weather-icons" style="font-size: 20px;font-weight: bold;color: #397cf4;">°C</div>
  </div>
</div>
    </div>
    <header>
        <img src="./DisunicX.png" alt="" title="" class="" >
    </header>
    <div class="searchfunction">
        <div class="searchbar">
            <form action="https://google.com/search">
                <img src="./1.png" alt="">
                <input type="text" name="q" id="input" autocomplete="off" list="DisunicXdatabase">
                <button><svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                        </svg>
                </button>
            </form>
        </div>
    </div>
    
</body>
<script>
    function setting(){
        document.getElementById("opensetting").style.display = 'block';
    }
    function settingclose(){
        document.getElementById("opensetting").style.display = 'none';
    }
</script>
<script>
            /*
        User Story: I can see the wheather in my current location
        */

        //check if the browser supports geo
        $(document).ready(function(){
        if("geolocation" in navigator){
            navigator.geolocation.getCurrentPosition(function(position) {
            showWeather(position.coords.latitude, position.coords.longitude);
            });
            //console.log('geo is available');
        } else{
            $('.error').html('<p>Geolocation is not available in your browser</p>');
            //console.log('geo is not available');
        }
        });

        $('#show-weather span').html('<div class="uil-ripple-css" style="transform:scale(0.26); top:-42px; left:15px;"><div></div><div></div></div>');

        function showWeather(latitude, longitude){
        var urlWeather = "https://api.openweathermap.org/data/2.5/weather?";
        var lat = "lat=" + latitude;
        var lon = "&lon=" + longitude;
        var APIKEY = "&APPID=" + "f4b463ce4558c625c7004c6d7fa86b1a";
        var unitsCelcius = "&units=metric";
        var fetchUrl = urlWeather + lat + lon + unitsCelcius + APIKEY;
        $.ajax({
        url: fetchUrl,
        success:function(data){
            var temperature = data.main.temp;
            var weatherIcons = data.weather[0].main;
            
                $('#show-weather span').text(Math.round(temperature));     
                $('#location').text(data.name);
            $('#myonoffswitch').on('click', function(){
                if( $('#myonoffswitch').is(':checked') ){
                    temperature = temperature * 9/5 + 32;
                    $('#show-weather span').text(Math.round(temperature));
                    console.log(temperature);
                }else{
                    temperature = data.main.temp;
                    $('#show-weather span').text(temperature);
                }
            });
            
            // switch(weatherIcons){
            // case "Clouds":
            //     $('.weather-icons').html(
            //     '<div class="icon cloudy"><div class="cloud"></div><div class="cloud"></div></div>'
            //     );
            //     break;
            // case "Thunderstorm":
            //     $('.weather-icons').html('<div class="icon thunder-storm"><div class="cloud"></div><div class="lightning"><div class="bolt"></div><div class="bolt"></div></div></div>');
            //     break;
            // case "Rain":
            //     $('.weather-icons').html('<div class="icon rainy"><div class="cloud"></div><div class="rain"></div></div>');
            //     break;
            // case "Snow":
            //     $('.weather-icons').html('<div class="icon flurries"><div class="cloud"></div><div class="snow"><div class="flake"></div><div class="flake"></div></div></div>');
            // case "Clear":
            //     $('.weather-icons').html('<div class="icon sunny"><div class="sun"><div class="rays"></div></div></div>');
            // };
        }
        });

        }
</script>
</html>
